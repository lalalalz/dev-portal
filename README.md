# DEV PORTAL

개발자를 위해 운영상 필요한 기능들을 제공하는 서비스이다.
쉽게 개발자를 위한 어드민이라고 이해하면 좋을 것 같다.

# Secret

현재 배포 잡을 생성할 때, hidden parameter로 쿠버네티스 시크릿을 생성할 데이터(JSON 구조)를 전달한다.
이때, 해당 데이터의 Key 값을 어플리케이션에선 ${Key} 형태로 사용이 가능하다.
**보통 리소스 또는 인프라의 연결 정보나 계정 정보가 이에 해당된다.**

![img.png](img.png)

서비스 별로 잡을 생성할 때마다 해당 데이터(JSON)를 직접 작성하기가 번거롭고, 심지어 계정을 생성해줘야 하는 경우도 있다.
(예를 들어, 서비스 별로 MySQL 계정을 분리하는 경우)

이를 위해 서비스 이름을 작성하고, 사용할 자원 또는 인프라를 선택하면 그에 맞는 JSON 데이터를 생성해주는 기능을 제공한다.
필요한 경우에는 계정을 직접 생성해서 JSON 데이터에 함깨 내려준다.

## 핵심 개념

- 리소스(Resource): 외부 시스템(MySQL, Redis, Kafka 등)의 연결/계정 정보
- 프로비전(Provision): 필요시 서비스별 계정을 자동으로 생성하는 기능
- 프리셋 리소스(Preset Resource) : 프리셋 리소스는 시스템에 미리 등록되어 있는 리소스를 의미합니다. 시스템이 시작될 때 데이터베이스에서 불러오는 기본 리소스 템플릿이라고 생각하면 됩니다.
    - 프리셋 리소스의 특징
        - 시스템 시작 시 로드: 시스템이 초기화될 때 DB에서 자동으로 로드됨
        - 두 가지 유형으로 구분:
            - 공용 계정 프리셋: 모든 서비스가 공유하는 계정 정보가 포함됨 (예: 공통 Redis)
            - 프로비저닝용 프리셋: 계정 정보가 없는 템플릿으로, 서비스별 고유 계정을 생성하는 데 사용됨 (예: 서비스별 MySQL 계정)

## 작동 방식

1. 시스템 시작 시 DB에서 프리셋 리소스 정보를 불러옴

- 공용 계정 리소스: 계정 정보 포함
- 프로비저닝 가능 리소스: 계정 정보 제외


2. 사용자가 리소스 타입과 서비스 이름을 전달하여 시크릿 생성 요청:

- 타입에 맞는 프리셋 리소스를 모두 가져옴
    - 공용 계정 리소스: 프리셋 그대로 사용
    - 프로비저닝 가능 리소스: 계정 생성 후 정보 포함하여 제공

## 엔티티

- 시크릿(1)
